<!DOCTYPE html>
<html>
<head>
	<title>My Form</title>
	<style>
		table {
			border-collapse: collapse;
		}
		th, td {
			border: 1px solid black;
			padding: 5px;
			text-align: center;
		}
	</style>
</head>
<body>
	<h1>My Form</h1>
	<form>
		<table>
			<thead>
				<tr>
					<th>Date</th>
					<th>Apple</th>
					<th>Orange</th>
				</tr>
			</thead>
			<tbody id="table-body">
				<tr>
					<td><input type="date" name="date" /></td>
					<td><input type="number" name="apple" min="0" /></td>
					<td><input type="number" name="orange" min="0" max="10" /></td>
				</tr>
			</tbody>
		</table>
		<button type="button" onclick="addRow()">Add Row</button>
		<button type="button" onclick="saveData()">Save Data</button>
	</form>
	<script>
		let data = [];

		function addRow() {
			let tableBody = document.getElementById("table-body");
			let newRow = document.createElement("tr");
			newRow.innerHTML = `
				<td><input type="date" name="date" /></td>
				<td><input type="number" name="apple" min="0" /></td>
				<td><input type="number" name="orange" min="0" max="10" /></td>
			`;
			tableBody.appendChild(newRow);
		}

		function saveData() {
			let tableRows = document.querySelectorAll("#table-body tr");
			data = [];
			tableRows.forEach(row => {
				let rowData = {
					date: row.querySelector("input[name='date']").value,
					apple: row.querySelector("input[name='apple']").value,
					orange: row.querySelector("input[name='orange']").value
				};
				data.push(rowData);
			});
			let jsonData = { entries: data };

			fetch('https://soumenatta.github.io/web_tech_demo/data.json', {
			  method: 'POST',
			  body: JSON.stringify(jsonData)
			})
			.then(response => {
			  if (response.ok) {
			    console.log('Data saved successfully');
			  } else {
			    console.error('Error saving data:', response.statusText);
			  }
			})
			.catch(error => {
			  console.error('Error saving data:', error);
			});
		}
	</script>
</body>
</html>

